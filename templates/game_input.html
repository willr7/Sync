<!DOCTYPE html>
<html>
<head>
    <title>SYNC</title>
</head>
<body>
    <h1>SYNC</h1>
    
    <form id="gameTitleForm">
        <label for="gameTitle">Enter a Game Title:</label>
        <input type="text" id="gameTitle" name="gameTitle" required>
        <button type="submit">Generate</button>
    </form>
    
    <div id="CPU"></div>
    <div id="GPU"></div>
    <div id="Benchmark Score"></div>

    <script>
        document.getElementById('gameTitleForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const gameTitle = document.querySelector('input[name="gameTitle"]').value;
            fetch('/get_specs', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ gameTitle: gameTitle })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('CPU').textContent = 'Recommended CPU: ' + data.Processor[0];
                document.getElementById('GPU').textContent = 'Recommended GPU: ' + data.Graphics;

                const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                fetch(proxyUrl + "https://www.cpubenchmark.net/cpu.php?cpu=Intel+Core+i7-3537U")
                .then(benchmark_response => benchmark_response.text)
                .then(benchmark_data => {
                    const parser = new DOMParser();
                    const benchmarkDOM = parser.parseFromString(benchmark_data, 'text/html');
                    const scoreElement = benchmarkDOM.querySelector("#main_content > div.wrapper > div.main-cmps > div:nth-child(2) > div.ov-scroll > div > div.right-desc > span:nth-child(3)")
                    if (scoreElement) {
                        const score = scoreElement.textContent;
                        document.getElementById('Benchmark Score').textContent = 'Benchmark Score: ' + score;
                    } else {
                        document.getElementById('Benchmark Score').textContent = benchmarkDOM.QUE;
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            });

        });
    </script>
</body>
</html>
